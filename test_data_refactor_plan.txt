# 测试数据工具重构完整计划

## 阶段一：创建通用TestDataTool组件

### 2. 组件设计 (src/components/common/TestDataTool.vue)
✅ **Props接口**
   - testData: Object (必需)
   - formData: Object (必需) 
   - updateField: Function (必需)
   - formName: String (必需)
   - excludeFields: Array (默认: ['ExecutedDate'])
   - specialHandlers: Object (可选)

✅ **核心功能**
   - 环境检测 (isDevelopment)
   - 统一UI样式 (FormGroup + warning + DocumentCopy)
   - 通用fillTestData逻辑
   - Loading状态管理
   - 错误处理和中文日志
   - 异步操作模拟

✅ **特殊字段处理支持**
   - Trial Date 模式切换
   - 数组字段处理
   - 选择字段处理
   - 自定义处理函数
## 阶段二：补充缺失的测试数据 (constants.js)

### 1. 新增 4个表单的测试数据常量
✅ **ANSWER_TEST_DATA** - 回复表单测试数据
   - LetterDate: 'June 23, 2025'
   - OCName: 'John Smith'
   - OCFirm: 'Smith & Associates'
   - OCAddress: '123 Legal Ave, Los Angeles, CA 90210'
   - CaseName: 'ARCE CORDERO v. BROADWAY EXCHANGE'
   - CaseNumber: '24STCV25513'
   - DefendantName: 'BROADWAY EXCHANGE, LP'
   - ADNumber: 'AD-2024-001'
   - RespDate: 'June 30, 2025'

✅ **SETTLEMENT_TEST_DATA** - 和解协议表单测试数据
   - PlaintiffName: 'GUSTAVO ARCE CORDERO'
   - DefendantName: 'BROADWAY EXCHANGE, LP'
   - DefendantState: 'California'
   - DefendantEntityType: 'Limited Partnership'
   - CourtName: 'STANLEY MOSK COURTHOUSE'
   - CaseName: 'ARCE CORDERO v. BROADWAY EXCHANGE'
   - CaseNumber: '24STCV25513'
   - SettlementWrittenAmount: 'Fifty Thousand Dollars'
   - SettlementNumericalAmount: 50000
   - InstallmentPayment: 'Lump sum within 30 days'
   - DefenseContactMethod: 'Email'
   - DefenseEmail: 'defense@lawfirm.com'
   - DefenseFax: '(555) 123-4567'
   - DefenseCounselName: 'Jane Defense'
   - DefenseCounselFirm: 'Defense & Partners'
   - DefenseFirmAddress: '456 Defense St, Los Angeles, CA 90210'

✅ **DEMURRER_TEST_DATA** - Demurrer表单测试数据
   - PlaintiffName: 'GUSTAVO ARCE CORDERO'
   - DefendantName: 'BROADWAY EXCHANGE, LP'
   - CourtLocation: 'COUNTY OF LOS ANGELES'
   - CourtName: 'STANLEY MOSK COURTHOUSE'
   - CourtAddress: '111 N. Hill Street, Los Angeles, CA 90012'
   - HearingDate: 'August 15, 2025'
   - HearingTime: '9:00 AM'
   - HearingDept: 'Dept. "51"'
   - ResID: '526290823671'
   - ComplaintFilingDate: 'October 2, 2024'
   - TrialDate: 'Not Set'
   - JudgeName: 'Hon. Upinder S. Kalra'
   - CaseNumber: '24STCV25513'
   - CaseType: 'Labor Law'
   - SelectedCauses: ['Failure to Pay Wages', 'Overtime Violations']
   - AnswerFilingDate: 'November 15, 2024'
   - ChosenAD: 'AD-2024-001'
   - ServiceInfo: 'Email: brianu@jbulaw.com'
   - ServerName: 'Jennifer Ontiveros'
   - MnCDate: 'July 1, 2025'
   - MnCRespDate: 'July 15, 2025'
   - MnCResp: 'Agreed to extension'

✅ **MOTION_TO_STRIKE_TEST_DATA** - Motion to Strike表单测试数据
   - 与DEMURRER_TEST_DATA相同的基础字段
   - 调整部分特定字段值


## 阶段三：修改所有表单组件 (16个)

### 3. 已有测试数据功能的表单 (12个) - 重构
✅ **ComplaintForm.vue** - 起诉/损害赔偿表单
✅ **NtcOfDepoForm.vue** - NTC of Depo 表单  
✅ **PmpDepoForm.vue** - PMP Depo 表单
✅ **RequestForProductionForm.vue** - Request for Production 表单
✅ **RfpSexualHarassmentForm.vue** - RFP Sexual Harassment 表单
✅ **NtcOfRulingForm.vue** - NTC of Ruling 表单
✅ **CmcNoticeForm.vue** - CMC Notice 表单
✅ **NtcCaseReassignmentForm.vue** - NTC Case Reassignment 表单
✅ **Srogs01OvertimeForm.vue** - SROGS01 Overtime 表单
✅ **DeclContcOscForm.vue** - DECL CONTC OSC 表单
✅ **DeclToContCmcForm.vue** - DECL TO CONT CMC 表单
✅ **NtcOfContHearingForm.vue** - NTC OF CONTINUED HEARING 表单

**修改内容：**
- 移除 isLoadingTestData、fillTestData 方法
- 移除测试数据 FormGroup 模板代码
- 移除 DocumentCopy 图标引入
- 新增 TestDataTool 组件引入和使用

### 4. 新增测试数据功能的表单 (4个) - 新增
✅ **AnswerForm.vue** - 回复表单 (新增)
✅ **SettlementForm.vue** - 和解协议表单 (新增)  
✅ **DemurrerForm.vue** - Demurrer表单 (新增)
✅ **MotionToStrikeForm.vue** - Motion to Strike表单 (新增)

**修改内容：**
- 新增 TestDataTool 组件引入和使用
- 配置对应的测试数据和特殊处理

## 阶段四：统一模板代码

### 5. 所有表单使用相同模板
```vue
<!-- 测试数据工具 -->
<TestDataTool
  :test-data="FORM_TEST_DATA"
  :form-data="formData"
  :update-field="updateField"
  form-name="FORM_NAME"
  :exclude-fields="excludeFields"
  :special-handlers="specialHandlers"
/>
```

### 6. 特殊处理配置示例
```javascript
// Trial Date 处理
const trialDateHandler = {
  TrialDate: (value) => {
    if (value === 'Not Set') {
      trialDateMode.value = 'not-set'
      trialDateValue.value = null
    } else {
      trialDateMode.value = 'date'
      trialDateValue.value = value
    }
  }
}

// 数组字段处理
const arrayFieldHandler = {
  PlaintiffNames: (value) => {
    // 处理数组字段填充逻辑
  }
}
```

## 预估效果

### 代码减少量
- **16个表单组件**
- **每个组件减少 30-50 行重复代码**
- **总计减少约 480-800 行重复代码**
- **新增 1个通用组件约 150 行**
- **净减少约 330-650 行代码**

### 维护性提升
- **集中管理测试工具功能**
- **统一的交互体验**
- **便于后续功能扩展**
- **降低维护成本**

### 一致性保证
- **所有表单测试工具体验完全一致**
- **统一的错误处理和日志格式**
- **标准化的特殊字段处理**

---

## 执行顺序
1. 补充 constants.js 中的 4个测试数据
2. 创建 TestDataTool.vue 通用组件
3. 修改 16个表单组件（先易后难）
4. 测试验证所有表单功能
5. git 提交和文档更新

**确认此计划后开始执行！** 